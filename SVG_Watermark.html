<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVGæ°´å°ç”Ÿæˆå™¨ | wujunmin</title>
    <!-- å¼•å…¥ fontsource å¯å•†ç”¨å…è´¹å­—ä½“ (äº”ç§) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Roboto:wght@300;400;500&family=Open+Sans:wght@400;600&family=Montserrat:wght@400;500;600&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #f4f7fb;
            font-family: 'Inter', 'Segoe UI', Roboto, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
            color: #1a2634;
        }

        /* å•†åŠ¡é£å¡ç‰‡å®¹å™¨ */
        .business-card {
            max-width: 1360px;
            width: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 20, 40, 0.06);
            padding: 36px 40px;
            border: 1px solid #eaeef5;
            transition: all 0.2s;
        }

        h1 {
            font-size: 26px;
            font-weight: 600;
            color: #0a2b4a;
            letter-spacing: -0.01em;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        hr {
            border: none;
            border-top: 1px solid #dce3ec;
            margin: 24px 0 28px 0;
        }

        /* ä¸¤åˆ—å¸ƒå±€: é¢„è§ˆåŒº + æ§åˆ¶åŒº */
        .generator-panel {
            display: flex;
            gap: 36px;
            flex-wrap: wrap;
        }

        .preview-area {
            flex: 1 1 560px;
            background: #ffffff;
            border-radius: 16px;
            display: flex;
            flex-direction: column;
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .preview-header span {
            font-weight: 500;
            color: #2a4058;
            font-size: 15px;
            background: #f2f6fc;
            padding: 6px 16px;
            border-radius: 40px;
        }

        .svg-container {
            background: #ffffff;
            border-radius: 16px;
            border: 1px solid #e6ecf2;
            box-shadow: 0 4px 14px rgba(0, 0, 0, 0.02);
            padding: 24px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background 0.15s;
            min-height: 400px;
            height: 100%;
            width: 100%;
        }

        .svg-preview {
            max-width: 100%;
            height: auto;
            display: block;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.01);
        }

        /* æ§åˆ¶åŒºåŸŸ - ç²¾è‡´å•†åŠ¡è¡¨å• */
        .control-area {
            flex: 0 0 300px;
            background: #fafcff;
            border-radius: 20px;
            padding: 28px 26px;
            border: 1px solid #e2e9f2;
        }

        .control-group {
            margin-bottom: 26px;
        }

        .control-group label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
            font-weight: 500;
            color: #1f3a57;
            margin-bottom: 8px;
            letter-spacing: 0.3px;
        }

        .control-group label span {
            color: #54708f;
            font-weight: 400;
            font-size: 13px;
        }

        input, select {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #cbd6e3;
            border-radius: 12px;
            font-size: 14px;
            background: white;
            transition: all 0.15s;
            color: #0a1c2e;
            font-family: 'Inter', sans-serif;
        }

        input:focus, select:focus {
            border-color: #2e6c9c;
            outline: none;
            box-shadow: 0 0 0 4px rgba(46, 108, 156, 0.08);
        }

        .double-input {
            display: flex;
            gap: 12px;
        }

        .double-input div {
            flex: 1;
        }

        .color-row {
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .color-item {
            display: flex;
            flex-direction: column;
            gap: 6px;
            flex: 1;
        }

        .color-item span {
            font-size: 12px;
            color: #40657e;
        }

        input[type="color"] {
            height: 48px;
            padding: 6px;
            border-radius: 10px;
            cursor: pointer;
        }

        /* ç–å¯†æ»‘å—å®šåˆ¶ */
        .density-slider {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        input[type="range"] {
            padding: 0;
            height: 6px;
            border-radius: 10px;
            background: #d6e0e9;
            accent-color: #1f5f8e;
        }

        .density-value {
            min-width: 48px;
            background: #e4ecf3;
            padding: 6px 12px;
            border-radius: 40px;
            font-size: 13px;
            font-weight: 500;
            text-align: center;
            color: #0d3853;
        }

        /* åŠ¨ç”»åˆ‡æ¢èƒ¶å›Š - ä¸‰ç§åŠ¨ç”» */
        .animation-toggle {
            display: flex;
            background: transparent;
            border-radius: 0px;
            padding: 0px;
            gap: 8px;
        }

        .anim-option {
            flex: 1;
            text-align: center;
            padding: 10px 0;
            font-size: 14px;
            font-weight: 500;
            color: #315977;
            border-radius: 40px;
            cursor: pointer;
            transition: 0.1s;
        }

.anim-option.active {
    background: transparent;
    color: #0e4b74;
    text-decoration: underline;
    text-underline-offset: 6px;
    text-decoration-thickness: 2px;
    text-decoration-color: #0e4b74;
}

        .anim-radio {
            display: none;
        }

        .btn-download {
            background: #0a2e4a;
            color: white;
            border: none;
            border-radius: 14px;
            padding: 16px 20px;
            font-size: 16px;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            cursor: pointer;
            transition: 0.15s;
            width: 100%;
            margin-top: 18px;
            border: 1px solid #264a66;
            letter-spacing: 0.6px;
        }

        .btn-download:hover {
            background: #134569;
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(12, 60, 96, 0.12);
        }

        footer {
            margin-top: 40px;
            text-align: center;
            font-size: 15px;
            color: #496277;
            border-top: 1px solid #d6e2ec;
            padding-top: 26px;
            font-weight: 400;
        }

        footer a {
            color: #0a3e5c;
            text-decoration: none;
            font-weight: 600;
            border-bottom: 1px dashed #809ab3;
            padding-bottom: 2px;
        }

        footer a:hover {
            color: #021c2b;
            border-bottom-style: solid;
        }

        .font-options {
            font-size: 15px;
        }

        /* é€æ˜åº¦æ•°å€¼æ˜¾ç¤º */
        .opacity-value {
            min-width: 48px;
            background: #e4ecf3;
            padding: 6px 12px;
            border-radius: 40px;
            font-size: 13px;
            font-weight: 500;
            text-align: center;
            color: #0d3853;
        }
        .opacity-slider {
            display: flex;
            align-items: center;
            gap: 10px;
        }
    </style>
</head>
<body>
<div class="business-card">
    <h1>
        âš™ï¸ SVG æ°´å°ç”Ÿæˆå™¨
    </h1>
    <!-- ä¸»ç¼–è¾‘åŒº é¢„è§ˆ+æ§åˆ¶ -->
    <div class="generator-panel">
        <!-- å·¦ä¾§ SVG ç”»å¸ƒé¢„è§ˆ -->
        <div class="preview-area">
            <div class="preview-header">
                <span>ğŸ“º å®æ—¶é¢„è§ˆ</span>
                <span id="dimension-indicator">800 x 600</span>
            </div>
            <div class="svg-container" id="svgContainer" style="background-color: #f5f7fa;">
                <!-- SVG åŠ¨æ€æ¸²æŸ“åˆ°è¿™é‡Œ -->
                <svg id="liveSvg" class="svg-preview" width="800" height="600" xmlns="http://www.w3.org/2000/svg" style="background-color: #ffffff;"></svg>
            </div>
        </div>

        <!-- å³ä¾§æ§åˆ¶å° å•†åŠ¡é£å¯†é›†è°ƒèŠ‚ -->
        <div class="control-area">
            <form id="watermarkForm" onsubmit="return false;">
                <!-- æ°´å°åŸºç¡€æ–‡å­— -->
                <div class="control-group">
                    <label>ğŸ–Šï¸ æ°´å°æ–‡å­—</label>
                    <input type="text" id="watermarkText" value="ç»å¯†èµ„æ–™" placeholder="ä¾‹å¦‚: ç»å¯†èµ„æ–™">
                </div>
                <!-- å­—ä½“é€‰æ‹©ï¼š5ç§å…è´¹å•†ç”¨ -->
                <div class="control-group">
                    <label>ğŸ”¤ å­—ä½“</label>
                    <select id="fontFamily" class="font-options">
                        <option value="Inter, sans-serif" style="font-family: 'Inter';">Inter</option>
                        <option value="Roboto, sans-serif" style="font-family: 'Roboto';">Roboto</option>
                        <option value="Open Sans, sans-serif" style="font-family: 'Open Sans';">Open Sans</option>
                        <option value="Montserrat, sans-serif" style="font-family: 'Montserrat';">Montserrat</option>
                        <option value="Lato, sans-serif" style="font-family: 'Lato';">Lato</option>
                    </select>
                </div>
                <!-- ç”»å¸ƒé•¿å®½ -->
                <div class="control-group">
                    <label>ğŸ“ ç”»å¸ƒå°ºå¯¸ (å®½Ã—é«˜) <span>px</span></label>
                    <div class="double-input">
                        <div><input type="number" id="canvasWidth" value="800" min="200" max="2000" step="10"></div>
                        <div><input type="number" id="canvasHeight" value="600" min="200" max="2000" step="10"></div>
                    </div>
                </div>
                <!-- èƒŒæ™¯è‰² & æ–‡æœ¬è‰² -->
                <div class="control-group">
                    <label>ğŸ¨ èƒŒæ™¯è‰² / æ–‡å­—é¢œè‰²</label>
                    <div class="color-row">
                        <div class="color-item">
                            <span>ç”»å¸ƒèƒŒæ™¯</span>
                            <input type="color" id="bgColor" value="#ffffff">
                        </div>
                        <div class="color-item">
                            <span>æ°´å°é¢œè‰²</span>
                            <input type="color" id="textColor" value="#6586a0">
                        </div>
                    </div>
                </div>
                <!-- æ–‡å­—å¤§å° -->
                <div class="control-group">
                    <label>ğŸ”  æ–‡å­—å¤§å° <span id="fontSizeVal">24px</span></label>
                    <input type="range" id="fontSize" min="12" max="60" value="24" step="1">
                </div>
                <!-- é€æ˜åº¦ -->
                <div class="control-group">
                    <label>ğŸ’§ æ°´å°é€æ˜åº¦</label>
                    <div class="opacity-slider">
                        <input type="range" id="opacityRange" min="0.1" max="1" step="0.05" value="0.65">
                        <span class="opacity-value" id="opacityValue">0.65</span>
                    </div>
                </div>
                <!-- æ—‹è½¬è§’åº¦ -->
                <div class="control-group">
                    <label>â†©ï¸ æ—‹è½¬è§’åº¦ <span id="rotateVal">45Â°</span></label>
                    <input type="range" id="rotateAngle" min="-90" max="90" value="45" step="1">
                </div>
                <!-- ç–å¯†ç¨‹åº¦ï¼šè¡Œåˆ—æ­¥é•¿æ§åˆ¶ -->
                <div class="control-group">
                    <label>ğŸŒ¿ ç–å¯†ç¨‹åº¦ <span id="densityLabel">ä¸­</span></label>
                    <div class="density-slider">
                        <input type="range" id="density" min="40" max="150" value="90" step="5">
                        <span class="density-value" id="densityValue">90px</span>
                    </div>
                </div>
                <!-- åŠ¨ç”»æ¨¡å¼ï¼šé™æ€ / æ·¡å…¥å‘¼å¸ / æµ®åŠ¨éŸµå¾‹ -->
                <div class="control-group">
                    <label>ğŸŒ€ åŠ¨ç”»æ•ˆæœ</label>
                    <div class="animation-toggle" id="animToggle">
                        <input type="radio" name="animationType" id="staticMode" value="static" class="anim-radio" checked>
                        <label for="staticMode" class="anim-option active">é™æ€</label>
                        
                        <input type="radio" name="animationType" id="breathMode" value="breath" class="anim-radio">
                        <label for="breathMode" class="anim-option">æ·¡å…¥å‘¼å¸</label>
                        
                        <input type="radio" name="animationType" id="floatMode" value="float" class="anim-radio">
                        <label for="floatMode" class="anim-option">æµ®åŠ¨éŸµå¾‹</label>
                    </div>
                </div>
                <!-- ä¸‹è½½æŒ‰é’® -->
                <button class="btn-download" id="downloadBtn">
                    â¬‡ï¸ ä¸‹è½½ SVG æ–‡ä»¶
                </button>
            </form>
        </div>
    </div>
    <!-- è„šæ³¨ wujunmin è¶…é“¾æ¥ -->
    <footer>
        <a href="https://junminwu.github.io" target="_blank">wujunmin</a>
    </footer>
</div>

<script>
    (function() {
        "use strict";

        // ----- è·å–DOMå…ƒç´   -----
        const svg = document.getElementById('liveSvg');
        const textInput = document.getElementById('watermarkText');
        const fontSelect = document.getElementById('fontFamily');
        const widthInput = document.getElementById('canvasWidth');
        const heightInput = document.getElementById('canvasHeight');
        const bgColorInput = document.getElementById('bgColor');
        const textColorInput = document.getElementById('textColor');
        const fontSizeInput = document.getElementById('fontSize');
        const fontSizeVal = document.getElementById('fontSizeVal');
        const opacityInput = document.getElementById('opacityRange');
        const opacityValue = document.getElementById('opacityValue');
        const rotateInput = document.getElementById('rotateAngle');
        const rotateVal = document.getElementById('rotateVal');
        const densityInput = document.getElementById('density');
        const densityValue = document.getElementById('densityValue');
        const densityLabel = document.getElementById('densityLabel');
        
        // åŠ¨ç”»å•é€‰æŒ‰é’®
        const staticRadio = document.getElementById('staticMode');
        const breathRadio = document.getElementById('breathMode');
        const floatRadio = document.getElementById('floatMode');
        const animOptions = document.querySelectorAll('.anim-option');
        
        const dimIndicator = document.getElementById('dimension-indicator');
        const downloadBtn = document.getElementById('downloadBtn');

        // å½“å‰åŠ¨ç”»æ¨¡å¼
        let currentAnimMode = 'static'; 

        // ----- è¾…åŠ©å‡½æ•° -----
        function updateDensityLabel(value) {
            densityValue.innerText = value + 'px';
            if (value <= 60) densityLabel.innerText = 'ç´§å¯†';
            else if (value <= 90) densityLabel.innerText = 'ä¸­';
            else if (value <= 120) densityLabel.innerText = 'ç–';
            else densityLabel.innerText = 'æç–';
        }

        function updateRotateLabel(val) {
            rotateVal.innerText = val + 'Â°';
        }

        function updateFontSizeLabel(val) {
            fontSizeVal.innerText = val + 'px';
        }

        function updateOpacityLabel(val) {
            opacityValue.innerText = parseFloat(val).toFixed(2);
        }

        function updateDimIndicator(w, h) {
            dimIndicator.innerText = w + ' x ' + h;
        }

        // ----- æ ¸å¿ƒï¼šç”Ÿæˆå¸¦æ°´å°çš„SVGï¼ˆä¸‰ç§åŠ¨ç”»: æ— /å‘¼å¸/æµ®åŠ¨ï¼‰-----
        function renderSVG() {
            // è¯»å–æ‰€æœ‰å‚æ•°
            let text = textInput.value.trim();
            if (text === '') text = 'WATERMARK';

            const fontFamily = fontSelect.value;
            const canvasW = parseInt(widthInput.value, 10) || 800;
            const canvasH = parseInt(heightInput.value, 10) || 600;
            const bgColor = bgColorInput.value;
            const textColor = textColorInput.value;
            const fontSize = parseInt(fontSizeInput.value, 10) || 24;
            const opacity = parseFloat(opacityInput.value) || 0.65;
            const rotateAngle = parseInt(rotateInput.value, 10) || 45;
            const densityStep = parseInt(densityInput.value, 10) || 90;

            // æ›´æ–°æŒ‡ç¤ºå™¨
            updateDimIndicator(canvasW, canvasH);
            
            // åŠ¨ç”»æ¨¡å¼
            const isStatic = (currentAnimMode === 'static');
            const isBreath = (currentAnimMode === 'breath');
            const isFloat = (currentAnimMode === 'float');

            // è®¾ç½®SVGæ ¹å±æ€§
            svg.setAttribute('width', canvasW);
            svg.setAttribute('height', canvasH);
            svg.setAttribute('viewBox', `0 0 ${canvasW} ${canvasH}`);
            svg.style.backgroundColor = bgColor;

            let svgContent = '';
            // èƒŒæ™¯çŸ©å½¢
            svgContent += `<rect width="100%" height="100%" fill="${bgColor}" />`;

            // è®¡ç®—è¡Œåˆ—
            const colCount = Math.ceil(canvasW / densityStep) + 1;
            const rowCount = Math.ceil(canvasH / densityStep) + 1;
            const startX = -densityStep * 0.2;
            const startY = -densityStep * 0.2;

            // ä¸ºæ¯ä¸ªæ°´å°ç”Ÿæˆå¸¦é€æ˜åº¦ã€æ—‹è½¬ã€åŠ¨ç”»çš„SVG
            for (let row = 0; row < rowCount; row++) {
                for (let col = 0; col < colCount; col++) {
                    const x = startX + col * densityStep;
                    const y = startY + row * densityStep;
                    
                    // åŸºç¡€fill: åŠ ä¸Šé€æ˜åº¦
                    const fillColor = textColor; 
                    // ä½¿ç”¨rgba? ä¸ºäº†å…¼å®¹æ€§ï¼Œåœ¨fillåé¢åŠ ä¸Šopacityå±æ€§ï¼ˆé€‚ç”¨äºå•ä¸ªtextï¼‰
                    // ä¹Ÿå¯åœ¨styleä¸­è®¾ç½®ï¼Œä½†ä½¿ç”¨fill-opacityæ›´æ ‡å‡†
                    
                    // æ ¹æ®ä¸åŒåŠ¨ç”»æ¨¡å¼ç”Ÿæˆä¸åŒåŠ¨ç”»æ•ˆæœ
                    // æ‰€æœ‰æ¨¡å¼ä¸‹éƒ½æ·»åŠ é€æ˜åº¦ fill-opacity
                    
                    // 1. é™æ€: æ— åŠ¨ç”»ï¼Œä»…é€æ˜åº¦
                    if (isStatic) {
                        const textElement = `<text x="${x}" y="${y}" 
                                font-size="${fontSize}" 
                                fill="${fillColor}" fill-opacity="${opacity}"
                                font-family="${fontFamily}" 
                                text-anchor="middle" dominant-baseline="middle" 
                                transform="rotate(${rotateAngle}, ${x}, ${y})">
                                ${text}
                            </text>`;
                        svgContent += textElement;
                    }
                    
                    // 2. æ·¡å…¥å‘¼å¸: é€æ˜åº¦å‘¨æœŸæ€§å˜åŒ–ï¼Œæ‰€æœ‰æ°´å°æ•´ä½“å‘¼å¸æ„Ÿï¼Œæ¯è¡Œç•¥æœ‰å»¶è¿Ÿå·®
                    else if (isBreath) {
                        // å‘¼å¸åŠ¨ç”»: é€šè¿‡animateä¿®æ”¹fill-opacityï¼Œä»å½“å‰é€æ˜åº¦åˆ°è¾ƒä½å†å›æ¥ï¼Œä¸åŒè¡Œå»¶è¿Ÿä¸åŒ
                        const baseDelay = (row * 0.2 + col * 0.1) % 1.2;
                        const breathDuration = 2.4 + (row % 3) * 0.2;
                        const minOpacity = Math.max(0.15, opacity * 0.4); // å‘¼å¸æœ€ä½ä¸ä½äº0.15
                        const breathElement = `<text x="${x}" y="${y}" 
                                font-size="${fontSize}" 
                                fill="${fillColor}" fill-opacity="${opacity}"
                                font-family="${fontFamily}" 
                                text-anchor="middle" dominant-baseline="middle" 
                                transform="rotate(${rotateAngle}, ${x}, ${y})">
                                ${text}
                                <animate attributeName="fill-opacity" 
                                    values="${opacity};${minOpacity};${opacity}" 
                                    dur="${breathDuration}s" 
                                    begin="${baseDelay}s" 
                                    repeatCount="indefinite" />
                            </text>`;
                        svgContent += breathElement;
                    }
                    
                    // 3. æµ®åŠ¨éŸµå¾‹: å¾®å°çš„ä¸Šä¸‹æµ®åŠ¨ + é€æ˜åº¦å¾®å˜ï¼Œå½¢æˆè½»ç›ˆéŸµå¾‹
                    else if (isFloat) {
                        // ä½¿ç”¨animateTransform åšdyåç§»ï¼Œå¹¶ä¸”åŒæ—¶æ·»åŠ é€æ˜åº¦åŠ¨ç”»
                        const floatDelay = (row * 0.15 + col * 0.1) % 1.5;
                        const floatDuration = 3.0 + (col % 4) * 0.2;
                        const yOffset = 4; // ä¸Šä¸‹æµ®åŠ¨4px
                        // ä¸ºäº†åŒæ—¶æ—‹è½¬å’Œå¹³ç§»åŠ¨ç”»ï¼Œä½¿ç”¨gåŒ…è£¹ï¼Œæ·»åŠ ä¸¤ä¸ªåŠ¨ç”»
                        const floatGroup = `<g transform="rotate(${rotateAngle}, ${x}, ${y})">
                                <text x="${x}" y="${y}" 
                                    font-size="${fontSize}" 
                                    fill="${fillColor}" fill-opacity="${opacity}"
                                    font-family="${fontFamily}" 
                                    text-anchor="middle" dominant-baseline="middle">
                                    ${text}
                                </text>
                                <animateTransform attributeName="transform" type="translate" 
                                    from="0 0" to="0 ${yOffset}" 
                                    dur="${floatDuration}s" 
                                    begin="${floatDelay}s" 
                                    repeatCount="indefinite" 
                                    additive="sum" />
                                <animate attributeName="fill-opacity" 
                                    values="${opacity};${opacity*0.55};${opacity}" 
                                    dur="${floatDuration*0.8}s" 
                                    begin="${floatDelay}s" 
                                    repeatCount="indefinite" />
                            </g>`;
                        svgContent += floatGroup;
                    }
                }
            }

            svg.innerHTML = svgContent;
        }

        // ----- åˆå§‹åŒ–UIäº¤äº’ç›‘å¬ -----
        function attachListeners() {
            // æ‰€æœ‰è¾“å…¥è§¦å‘é‡æ–°æ¸²æŸ“
            const inputs = [textInput, fontSelect, widthInput, heightInput, bgColorInput, textColorInput, fontSizeInput, rotateInput, densityInput, opacityInput];
            inputs.forEach(input => input.addEventListener('input', function() {
                if (input === fontSizeInput) updateFontSizeLabel(fontSizeInput.value);
                if (input === rotateInput) updateRotateLabel(rotateInput.value);
                if (input === densityInput) updateDensityLabel(densityInput.value);
                if (input === opacityInput) updateOpacityLabel(opacityInput.value);
                renderSVG();
            }));

            // åŠ¨ç”»åˆ‡æ¢: ä¸‰ç§æ¨¡å¼
            function setActiveAnim(activeValue) {
                animOptions.forEach(opt => opt.classList.remove('active'));
                if (activeValue === 'static') {
                    staticRadio.checked = true;
                    animOptions[0].classList.add('active');
                    currentAnimMode = 'static';
                } else if (activeValue === 'breath') {
                    breathRadio.checked = true;
                    animOptions[1].classList.add('active');
                    currentAnimMode = 'breath';
                } else if (activeValue === 'float') {
                    floatRadio.checked = true;
                    animOptions[2].classList.add('active');
                    currentAnimMode = 'float';
                }
                renderSVG();
            }

            staticRadio.addEventListener('change', function(e) {
                if (staticRadio.checked) setActiveAnim('static');
            });
            breathRadio.addEventListener('change', function(e) {
                if (breathRadio.checked) setActiveAnim('breath');
            });
            floatRadio.addEventListener('change', function(e) {
                if (floatRadio.checked) setActiveAnim('float');
            });

            // èƒ¶å›Šç‚¹å‡»
            animOptions[0].addEventListener('click', function() { setActiveAnim('static'); });
            animOptions[1].addEventListener('click', function() { setActiveAnim('breath'); });
            animOptions[2].addEventListener('click', function() { setActiveAnim('float'); });

            // å°ºå¯¸å˜æ›´åŒæ—¶æ›´æ–°æŒ‡ç¤º
            widthInput.addEventListener('change', function() { updateDimIndicator(widthInput.value, heightInput.value); renderSVG(); });
            heightInput.addEventListener('change', function() { updateDimIndicator(widthInput.value, heightInput.value); renderSVG(); });

            // åˆå§‹label
            updateFontSizeLabel(fontSizeInput.value);
            updateRotateLabel(rotateInput.value);
            updateDensityLabel(densityInput.value);
            updateOpacityLabel(opacityInput.value);
            updateDimIndicator(widthInput.value, heightInput.value);
        }

        // ----- ä¸‹è½½SVG ä¿ç•™æ‰€æœ‰åŠ¨ç”»åŠæ ·å¼ -----
        function downloadSVG() {
            const serializer = new XMLSerializer();
            let svgString = serializer.serializeToString(svg);
            svgString = '<?xml version="1.0" encoding="UTF-8"?>\n' + svgString;
            if (!svgString.includes('xmlns="http://www.w3.org/2000/svg"')) {
                svgString = svgString.replace('<svg', '<svg xmlns="http://www.w3.org/2000/svg"');
            }
            const blob = new Blob([svgString], {type: 'image/svg+xml'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'watermark.svg';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        downloadBtn.addEventListener('click', downloadSVG);

        window.onload = function() {
            attachListeners();
            renderSVG();
        };
    })();
</script>

</body>
</html>